<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∞ RaspaCash - Raspadinha Online</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .balance {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 15px;
            display: inline-block;
            font-weight: bold;
            font-size: 1.2em;
            color: #333;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .main-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .game-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        .scratch-card {
            width: 300px;
            height: 200px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border-radius: 15px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .scratch-card:hover {
            transform: scale(1.05);
        }

        .scratch-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #C0C0C0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scratch-card.scratched::before {
            display: none;
        }

        .card-content {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            z-index: 1;
        }

        .game-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .menu-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .login-form, .register-form {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e1e1;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .deposit-withdraw {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .scratch-card {
                width: 250px;
                height: 150px;
            }
            
            .game-area, .login-form, .register-form, .deposit-withdraw {
                margin: 10px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="app-container">
        <!-- Conte√∫do ser√° gerado pelo JavaScript -->
    </div>

    <script>
        class RaspaCashApp {
            constructor() {
                this.currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
                this.currentScreen = this.currentUser ? 'game' : 'login';
                this.prizes = [0, 0, 0, 0, 0, 5, 10, 15, 20, 25, 50, 100]; // Probabilidades
                this.render();
            }

            render() {
                const app = document.getElementById('app');
                
                if (this.currentScreen === 'login') {
                    app.innerHTML = this.renderLogin();
                } else if (this.currentScreen === 'register') {
                    app.innerHTML = this.renderRegister();
                } else if (this.currentScreen === 'game') {
                    app.innerHTML = this.renderGame();
                } else if (this.currentScreen === 'deposit') {
                    app.innerHTML = this.renderDeposit();
                } else if (this.currentScreen === 'withdraw') {
                    app.innerHTML = this.renderWithdraw();
                }
            }

            renderLogin() {
                return `
                    <div class="main-content">
                        <div class="login-form">
                            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">üé∞ Entrar no RaspaCash</h2>
                            <form onsubmit="window.app.login(event)">
                                <div class="form-group">
                                    <label>üìß Email:</label>
                                    <input type="email" id="loginEmail" required>
                                </div>
                                <div class="form-group">
                                    <label>üîí Senha:</label>
                                    <input type="password" id="loginPassword" required>
                                </div>
                                <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;">
                                    üöÄ Entrar
                                </button>
                            </form>
                            <div style="text-align: center;">
                                <p>N√£o tem conta?</p>
                                <button onclick="window.app.goToScreen('register')" class="btn btn-success">
                                    ‚ú® Criar Conta
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderRegister() {
                return `
                    <div class="main-content">
                        <div class="register-form">
                            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">‚ú® Criar Conta</h2>
                            <form onsubmit="window.app.register(event)">
                                <div class="form-group">
                                    <label>üë§ Nome:</label>
                                    <input type="text" id="registerName" required>
                                </div>
                                <div class="form-group">
                                    <label>üìß Email:</label>
                                    <input type="email" id="registerEmail" required>
                                </div>
                                <div class="form-group">
                                    <label>üîí Senha:</label>
                                    <input type="password" id="registerPassword" required minlength="6">
                                </div>
                                <button type="submit" class="btn btn-success" style="width: 100%; margin-bottom: 15px;">
                                    üéâ Criar Conta
                                </button>
                            </form>
                            <div style="text-align: center;">
                                <p>J√° tem conta?</p>
                                <button onclick="window.app.goToScreen('login')" class="btn btn-primary">
                                    üöÄ Fazer Login
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderGame() {
                return `
                    <div class="header">
                        <h1>üé∞ RaspaCash</h1>
                        <div class="balance">
                            üí∞ Saldo: R$ ${this.currentUser.balance.toFixed(2)}
                        </div>
                        <p style="color: white; margin-top: 10px;">
                            Ol√°, ${this.currentUser.name}! üëã
                        </p>
                    </div>
                    <div class="main-content">
                        <div class="game-area">
                            <h2>üé≤ Raspadinha M√°gica</h2>
                            <p>Clique na carta para rasp√°-la e descobrir seu pr√™mio!</p>
                            
                            <div class="scratch-card" id="scratchCard" onclick="window.app.playScratch()">
                                <div class="card-content" style="color: white; z-index: 0;">‚ùì</div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #666; font-size: 1.2em; z-index: 2;">
                                    Clique para raspar!
                                </div>
                            </div>
                            
                            <div class="game-buttons">
                                <button onclick="window.app.playScratch()" class="btn btn-primary">
                                    üé∞ Jogar (R$ 5.00)
                                </button>
                                <button onclick="window.app.playScratch(10)" class="btn btn-warning">
                                    üíé Jogar Premium (R$ 10.00)
                                </button>
                            </div>
                        </div>
                        
                        <div class="menu-buttons">
                            <button onclick="window.app.goToScreen('deposit')" class="btn btn-success">
                                üí≥ Depositar
                            </button>
                            <button onclick="window.app.goToScreen('withdraw')" class="btn btn-warning">
                                üí∏ Sacar
                            </button>
                            <button onclick="window.app.showHistory()" class="btn btn-primary">
                                üìä Hist√≥rico
                            </button>
                            <button onclick="window.app.logout()" class="btn" style="background: #6c757d; color: white;">
                                üö™ Sair
                            </button>
                        </div>
                    </div>
                `;
            }

            renderDeposit() {
                return `
                    <div class="header">
                        <h1>üé∞ RaspaCash</h1>
                        <div class="balance">
                            üí∞ Saldo: R$ ${this.currentUser.balance.toFixed(2)}
                        </div>
                    </div>
                    <div class="main-content">
                        <div class="deposit-withdraw">
                            <h2>üí≥ Fazer Dep√≥sito</h2>
                            <p style="margin-bottom: 20px;">Adicione dinheiro √† sua conta</p>
                            
                            <form onsubmit="window.app.deposit(event)">
                                <div class="form-group">
                                    <label>üí∞ Valor do Dep√≥sito:</label>
                                    <input type="number" id="depositAmount" min="10" step="0.01" placeholder="Ex: 50.00" required>
                                </div>
                                
                                <div style="margin: 20px 0;">
                                    <p><strong>üîí Pagamento Seguro via PIX</strong></p>
                                    <p style="color: #666;">Processamento instant√¢neo</p>
                                </div>
                                
                                <button type="submit" class="btn btn-success" style="width: 100%; margin-bottom: 15px;">
                                    üí≥ Confirmar Dep√≥sito
                                </button>
                            </form>
                            
                            <button onclick="window.app.goToScreen('game')" class="btn btn-primary">
                                ‚¨ÖÔ∏è Voltar ao Jogo
                            </button>
                        </div>
                    </div>
                `;
            }

            renderWithdraw() {
                return `
                    <div class="header">
                        <h1>üé∞ RaspaCash</h1>
                        <div class="balance">
                            üí∞ Saldo: R$ ${this.currentUser.balance.toFixed(2)}
                        </div>
                    </div>
                    <div class="main-content">
                        <div class="deposit-withdraw">
                            <h2>üí∏ Sacar Dinheiro</h2>
                            <p style="margin-bottom: 20px;">Transfira seus ganhos</p>
                            
                            <form onsubmit="window.app.withdraw(event)">
                                <div class="form-group">
                                    <label>üí∞ Valor do Saque:</label>
                                    <input type="number" id="withdrawAmount" min="20" max="${this.currentUser.balance}" step="0.01" placeholder="M√≠n: R$ 20.00" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>üîë Chave PIX:</label>
                                    <input type="text" id="pixKey" placeholder="CPF, email ou telefone" required>
                                </div>
                                
                                <div style="margin: 20px 0; padding: 15px; background: #fff3cd; border-radius: 10px; border-left: 4px solid #ffc107;">
                                    <p><strong>‚è±Ô∏è Tempo de Processamento:</strong></p>
                                    <p>‚Ä¢ At√© R$ 100: Instant√¢neo</p>
                                    <p>‚Ä¢ Acima de R$ 100: At√© 24h</p>
                                </div>
                                
                                <button type="submit" class="btn btn-warning" style="width: 100%; margin-bottom: 15px;">
                                    üí∏ Confirmar Saque
                                </button>
                            </form>
                            
                            <button onclick="window.app.goToScreen('game')" class="btn btn-primary">
                                ‚¨ÖÔ∏è Voltar ao Jogo
                            </button>
                        </div>
                    </div>
                `;
            }

            login(event) {
                event.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                // Simular login (em produ√ß√£o, verificar no servidor)
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const user = users.find(u => u.email === email && u.password === password);
                
                if (user) {
                    this.currentUser = user;
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    this.currentScreen = 'game';
                    this.render();
                    alert('üéâ Login realizado com sucesso!');
                } else {
                    alert('‚ùå Email ou senha incorretos!');
                }
            }

            register(event) {
                event.preventDefault();
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                
                const users = JSON.parse(localStorage.getItem('users')) || [];
                
                if (users.find(u => u.email === email)) {
                    alert('‚ùå Email j√° cadastrado!');
                    return;
                }
                
                const newUser = {
                    id: Date.now().toString(),
                    name,
                    email,
                    password,
                    balance: 20.00 // B√¥nus de boas-vindas
                };
                
                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                alert('üéâ Conta criada com sucesso! Voc√™ ganhou R$ 20,00 de b√¥nus!');
                this.currentUser = newUser;
                localStorage.setItem('currentUser', JSON.stringify(newUser));
                this.currentScreen = 'game';
                this.render();
            }

            deposit(event) {
                event.preventDefault();
                const amount = parseFloat(document.getElementById('depositAmount').value);
                
                if (amount < 10) {
                    alert('‚ùå Valor m√≠nimo de dep√≥sito: R$ 10,00');
                    return;
                }
                
                // Simular processamento de pagamento
                this.currentUser.balance += amount;
                this.saveUser();
                
                // Salvar transa√ß√£o
                this.saveTransaction({
                    type: 'deposit',
                    amount: amount,
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                alert(`‚úÖ Dep√≥sito de R$ ${amount.toFixed(2)} realizado com sucesso!`);
                this.goToScreen('game');
            }

            withdraw(event) {
                event.preventDefault();
                const amount = parseFloat(document.getElementById('withdrawAmount').value);
                const pixKey = document.getElementById('pixKey').value;
                
                if (amount < 20) {
                    alert('‚ùå Valor m√≠nimo de saque: R$ 20,00');
                    return;
                }
                
                if (amount > this.currentUser.balance) {
                    alert('‚ùå Saldo insuficiente!');
                    return;
                }
                
                this.currentUser.balance -= amount;
                this.saveUser();
                
                // Salvar transa√ß√£o
                this.saveTransaction({
                    type: 'withdrawal',
                    amount: amount,
                    pixKey: pixKey,
                    date: new Date().toISOString(),
                    status: 'processing'
                });
                
                alert(`‚úÖ Saque de R$ ${amount.toFixed(2)} solicitado!\nüîë PIX: ${pixKey}\n‚è±Ô∏è Processamento: ${amount <= 100 ? 'Instant√¢neo' : 'At√© 24h'}`);
                this.goToScreen('game');
            }

            playScratch(cost = 5) {
                if (this.currentUser.balance < cost) {
                    alert('üí∏ Saldo insuficiente!\n\nüí° Fa√ßa um dep√≥sito para continuar jogando.');
                    return;
                }
                
                this.currentUser.balance -= cost;
                
                const scratchCard = document.getElementById('scratchCard');
                const randomPrize = this.prizes[Math.floor(Math.random() * this.prizes.length)];
                const multiplier = cost === 10 ? 2 : 1; // Pr√™mio duplo no premium
                const finalPrize = randomPrize * multiplier;
                
                if (finalPrize > 0) {
                    this.currentUser.balance += finalPrize;
                }
                
                this.saveUser();
                
                // Salvar transa√ß√£o do jogo
                this.saveTransaction({
                    type: 'game',
                    cost: cost,
                    prize: finalPrize,
                    date: new Date().toISOString()
                });
                
                // Anima√ß√£o de raspagem
                scratchCard.style.transform = 'scale(1.1)';
                scratchCard.innerHTML = `
                    <div class="card-content" style="color: #333;">
                        üé∞ Raspando...
                    </div>
                `;
                
                setTimeout(() => {
                    scratchCard.classList.add('scratched');
                    if (finalPrize > 0) {
                        scratchCard.innerHTML = `
                            <div class="card-content" style="color: #28a745; animation: pulse 1s infinite;">
                                üèÜ R$ ${finalPrize.toFixed(2)}
                            </div>
                        `;
                    } else {
                        scratchCard.innerHTML = `
                            <div class="card-content" style="color: #dc3545;">
                                üòî Tente novamente
                            </div>
                        `;
                    }
                    
                    setTimeout(() => {
                        scratchCard.style.transform = 'scale(1)';
                        scratchCard.classList.remove('scratched');
                        scratchCard.innerHTML = `
                            <div class="card-content" style="color: white; z-index: 0;">‚ùì</div>
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #666; font-size: 1.2em; z-index: 2;">
                                Clique para raspar!
                            </div>
                        `;
                        
                        // Atualizar saldo na tela
                        this.render();
                        
                        if (finalPrize > 0) {
                            setTimeout(() => {
                                alert(`üéâ PARAB√âNS!\n\nüèÜ Voc√™ ganhou R$ ${finalPrize.toFixed(2)}!\nüí∞ Novo saldo: R$ ${this.currentUser.balance.toFixed(2)}`);
                            }, 500);
                        }
                    }, 2000);
                }, 1000);
            }

            saveUser() {
                localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
                
                // Atualizar na lista de usu√°rios tamb√©m
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const userIndex = users.findIndex(u => u.id === this.currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex] = this.currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                }
            }

            saveTransaction(transaction) {
                const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
                transaction.id = Date.now().toString() + Math.random().toString(36);
                transaction.userId = this.currentUser.id;
                transactions.push(transaction);
                localStorage.setItem('transactions', JSON.stringify(transactions));
            }

            showHistory() {
                const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
                const userTransactions = transactions
                    .filter(t => t.userId === this.currentUser.id)
                    .slice(-10)
                    .reverse();
                
                let historyText = "üìä HIST√ìRICO (√öltimas 10)\n";
                historyText += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";
                
                if (userTransactions.length === 0) {
                    historyText += "üìù Nenhuma transa√ß√£o ainda.\n\nüé∞ Comece jogando!";
                } else {
                    userTransactions.forEach(transaction => {
                        const date = new Date(transaction.date).toLocaleString('pt-BR');
                        
                        if (transaction.type === 'deposit') {
                            historyText += `üí≥ DEP√ìSITO\n`;
                            historyText += `üí∞ +R$ ${transaction.amount.toFixed(2)}\n`;
                            historyText += `üìÖ ${date}\n\n`;
                            
                        } else if (transaction.type === 'withdrawal') {
                            historyText += `üí∏ SAQUE\n`;
                            historyText += `üí∞ -R$ ${transaction.amount.toFixed(2)}\n`;
                            historyText += `üìÖ ${date}\n\n`;
                            
                        } else if (transaction.type === 'game') {
                            historyText += `üé∞ JOGO\n`;
                            historyText += `üí∏ -R$ ${transaction.cost.toFixed(2)}`;
                            if (transaction.prize > 0) {
                                historyText += ` | üèÜ +R$ ${transaction.prize.toFixed(2)}`;
                            }
                            historyText += `\nüìÖ ${date}\n\n`;
                        }
                    });
                }
                
                alert(historyText);
            }

            goToScreen(screen) {
                this.currentScreen = screen;
                this.render();
            }

            logout() {
                if (confirm('üö™ Tem certeza que deseja sair?\n\nSeus dados ficar√£o salvos.')) {
                    localStorage.removeItem('currentUser');
                    this.currentUser = null;
                    this.currentScreen = 'login';
                    this.render();
                }
            }
        }

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', () => {
            window.app = new RaspaCashApp();
            console.log('üöÄ RaspaCash iniciado!');
        });

        // Adicionar anima√ß√£o de pulso para pr√™mios
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
