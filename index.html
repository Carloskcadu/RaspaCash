<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>RaspaCash - Sistema de Raspadinha Online</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Meta Tags para SEO -->
    <meta name="description" content="RaspaCash - O melhor sistema de raspadinha online do Brasil! Ganhe pr√™mios de at√© R$ 2.000 raspando cartelas digitais.">
    <meta name="keywords" content="raspadinha, loteria, pr√™mios, jogos, Brasil, dinheiro, PIX">
    <meta property="og:title" content="RaspaCash - Sistema de Raspadinha Online">
    <meta property="og:description" content="Ganhe pr√™mios de at√© R$ 2.000 raspando cartelas digitais!">
    <meta property="og:url" content="https://raspacashbr.online">
    <meta property="og:type" content="website">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé∞</text></svg>">
    
    <style>
        /* Anima√ß√µes customizadas */
        @keyframes pulse-gold {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
            }
            50% { 
                box-shadow: 0 0 40px rgba(251, 191, 36, 0.8);
            }
        }
        
        .animate-pulse-gold {
            animation: pulse-gold 2s infinite;
        }
        
        @keyframes shine {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        
        .animate-shine {
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            background-size: 200% 200%;
            animation: shine 2s infinite;
        }
        
        /* Canvas para raspadinha */
        .scratch-canvas {
            cursor: crosshair;
            user-select: none;
            -webkit-user-select: none;
        }
        
        /* Esconder scrollbar mas manter funcionalidade */
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900 text-white min-h-screen min-h-[100dvh] overflow-x-hidden">
    <!-- Container Principal -->
    <div id="app">
        <!-- Tela de Login -->
        <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
            <div class="bg-gradient-to-br from-purple-900/90 via-blue-900/90 to-cyan-900/90 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full border border-cyan-400/30 shadow-2xl">
                <div class="text-center mb-8">
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent mb-2">
                        üé∞ RaspaCash
                    </h1>
                    <p class="text-cyan-300">Entre para come√ßar a raspar e ganhar!</p>
                    <p class="text-sm text-gray-400 mt-2">Pr√™mios de at√© R$ 2.000!</p>
                </div>
                
                <div class="space-y-4">
                    <input
                        type="text"
                        id="userName"
                        placeholder="Seu nome completo"
                        class="w-full p-3 bg-gray-800 border border-cyan-400/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-400"
                        required
                    />
                    <input
                        type="email"
                        id="userEmail"
                        placeholder="Seu e-mail"
                        class="w-full p-3 bg-gray-800 border border-cyan-400/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-400"
                        required
                    />
                    <button
                        onclick="handleLogin()"
                        id="loginButton"
                        class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-bold py-3 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:hover:scale-100"
                    >
                        üé≤ Entrar e Jogar
                    </button>
                </div>
                
                <div class="mt-6 text-center text-sm text-gray-400">
                    <p>Ao entrar, voc√™ concorda com nossos termos de uso</p>
                </div>
            </div>
        </div>
        
        <!-- Tela Principal do Jogo -->
        <div id="gameScreen" class="hidden min-h-screen">
            <!-- Header fixo -->
            <header class="sticky top-0 bg-gradient-to-r from-purple-900/95 via-blue-900/95 to-cyan-900/95 backdrop-blur-lg p-4 border-b border-cyan-400/30 z-50">
                <div class="flex justify-between items-center">
                    <h1 class="text-xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">
                        üé∞ RaspaCash
                    </h1>
                    
                    <div class="flex items-center space-x-4">
                        <div class="text-center">
                            <div class="text-xs text-gray-300">Saldo</div>
                            <div id="userBalance" class="text-sm font-bold text-green-400">R$ 0,00</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-300">Cartelas</div>
                            <div id="cardsPlayed" class="text-sm font-bold text-cyan-400">0</div>
                        </div>
                        <button onclick="logout()" class="text-xs bg-red-600 hover:bg-red-700 px-2 py-1 rounded">Sair</button>
                    </div>
                </div>
            </header>
            
            <!-- Menu de Navega√ß√£o -->
            <nav class="bg-gradient-to-r from-purple-800/80 via-blue-800/80 to-cyan-800/80 backdrop-blur-lg p-4 sticky top-[72px] z-40 border-b border-cyan-400/20">
                <div class="flex justify-center space-x-2">
                    <button
                        id="normalGameBtn"
                        onclick="showNormalGame()"
                        class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 text-sm"
                    >
                        üé≤ Cartela Normal
                    </button>
                    <button
                        id="promoGameBtn"
                        onclick="showPromoGame()"
                        class="bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 text-sm animate-pulse-gold"
                    >
                        üî• Pacote Promo
                    </button>
                </div>
            </nav>
            
            <!-- √Årea do Jogo -->
            <main class="p-4 pb-20">
                <!-- Jogo Normal -->
                <div id="normalGame" class="max-w-md mx-auto">
                    <!-- Header do Jogo -->
                    <div class="bg-gradient-to-br from-purple-900/80 via-blue-900/80 to-cyan-900/80 backdrop-blur-lg rounded-xl p-6 mb-6 border border-cyan-400/30 shadow-2xl">
                        <div class="text-center mb-4">
                            <h2 class="text-2xl font-bold text-yellow-300 mb-2">üéØ Cartela Normal</h2>
                            <p class="text-cyan-300 text-sm">Raspe para revelar os n√∫meros sorteados!</p>
                            <p class="text-yellow-300 text-xs mt-1">Pr√™mios: R$ 5 a R$ 500</p>
                        </div>
                        
                        <!-- N√∫meros Sorteados -->
                        <div class="bg-gradient-to-r from-green-600/20 to-blue-600/20 rounded-lg p-4 mb-4 border border-green-400/30">
                            <h3 class="text-sm font-semibold text-green-300 mb-2 text-center">üçÄ N√∫meros da Sorte</h3>
                            <div id="winningNumbers" class="grid grid-cols-3 gap-2">
                                <!-- N√∫meros vencedores ser√£o inseridos aqui -->
                            </div>
                        </div>
                        
                        <!-- √Årea de Raspadinha -->
                        <div class="relative">
                            <!-- Canvas de Fundo (N√∫meros) -->
                            <canvas
                                id="backgroundCanvas"
                                width="320"
                                height="220"
                                class="absolute inset-0 w-full h-auto rounded-lg border-2 border-white/20"
                            ></canvas>
                            
                            <!-- Canvas de Cobertura (Raspadinha) -->
                            <canvas
                                id="scratchCanvas"
                                width="320"
                                height="220"
                                class="relative w-full h-auto rounded-lg border-2 border-white/30 cursor-crosshair scratch-canvas"
                            ></canvas>
                        </div>
                        
                        <!-- Barra de Progresso -->
                        <div class="mt-4 text-sm">
                            <div class="flex justify-between items-center">
                                <span class="text-cyan-300">√Årea raspada: <span id="scratchProgress">0%</span></span>
                                <span class="text-yellow-300 font-bold animate-pulse">‚ö° Continue raspando! ‚ö°</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-3 mt-2 border border-yellow-400/30">
                                <div 
                                    id="progressBar"
                                    class="bg-gradient-to-r from-green-400 via-yellow-400 to-orange-400 h-3 rounded-full transition-all duration-300 shadow-lg"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                    </div>

                    <!-- Resultado -->
                    <div id="gameResult" class="hidden bg-gradient-to-br from-purple-900/80 via-blue-900/80 to-cyan-900/80 backdrop-blur-lg rounded-xl p-6 mb-6 border border-cyan-400/30 shadow-2xl">
                        <div class="text-center mb-4">
                            <h4 class="text-xl font-bold text-yellow-300 mb-2">üéâ Resultado da Cartela!</h4>
                            <div id="resultContent">
                                <!-- Resultado ser√° inserido aqui -->
                            </div>
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div class="text-center space-y-3">
                        <button
                            id="newCardButton"
                            onclick="generateNewCard()"
                            class="w-full bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200"
                        >
                            üé≤ Nova Cartela (R$ 2,00)
                        </button>
                        
                        <button
                            id="claimButton"
                            onclick="claimPrize()"
                            class="hidden w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200"
                        >
                            üí∞ Resgatar Pr√™mio
                        </button>
                    </div>
                </div>
                
                <!-- Jogo Promocional -->
                <div id="promoGame" class="hidden max-w-md mx-auto">
                    <!-- Header do Jogo Promocional -->
                    <div class="bg-gradient-to-br from-orange-900/80 via-red-900/80 to-yellow-900/80 backdrop-blur-lg rounded-xl p-6 mb-6 border border-orange-400/40 shadow-2xl">
                        <div class="text-center mb-4">
                            <h2 class="text-2xl font-bold text-orange-300 mb-2 animate-pulse">üî• Pacote Promocional</h2>
                            <p class="text-yellow-300 text-sm font-semibold">OFERTA ESPECIAL - GANHE MAIS!</p>
                            <p class="text-orange-200 text-xs mt-1">Pr√™mios: R$ 10 a R$ 2.000</p>
                        </div>
                        
                        <!-- N√∫meros Sorteados Promocionais -->
                        <div class="bg-gradient-to-r from-orange-600/30 to-red-600/30 rounded-lg p-4 mb-4 border border-orange-400/40">
                            <h3 class="text-sm font-semibold text-orange-200 mb-2 text-center">‚≠ê N√∫meros Especiais</h3>
                            <div id="promoWinningNumbers" class="grid grid-cols-3 gap-2">
                                <!-- N√∫meros vencedores promocionais ser√£o inseridos aqui -->
                            </div>
                        </div>
                        
                        <!-- √Årea de Raspadinha Promocional -->
                        <div class="relative">
                            <!-- Canvas de Fundo (N√∫meros Promocionais) -->
                            <canvas
                                id="promoBackgroundCanvas"
                                width="320"
                                height="220"
                                class="absolute inset-0 w-full h-auto rounded-lg border-2 border-orange-400/30"
                            ></canvas>
                            
                            <!-- Canvas de Cobertura Promocional -->
                            <canvas
                                id="promoScratchCanvas"
                                width="320"
                                height="220"
                                class="relative w-full h-auto rounded-lg border-2 border-orange-400/40 cursor-crosshair scratch-canvas"
                            ></canvas>
                        </div>
                        
                        <!-- Barra de Progresso Promocional -->
                        <div class="mt-4 text-sm">
                            <div class="flex justify-between items-center">
                                <span class="text-orange-300">√Årea raspada: <span id="promoScratchProgress">0%</span></span>
                                <span class="text-yellow-300 font-bold animate-pulse">üî• RASPE PARA GANHAR! üî•</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-3 mt-2 border border-orange-400/40">
                                <div 
                                    id="promoProgressBar"
                                    class="bg-gradient-to-r from-orange-400 via-red-400 to-yellow-400 h-3 rounded-full transition-all duration-300 shadow-lg"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                    </div>

                    <!-- Resultado Promocional -->
                    <div id="promoGameResult" class="hidden bg-gradient-to-br from-orange-900/80 via-red-900/80 to-yellow-900/80 backdrop-blur-lg rounded-xl p-6 mb-6 border border-orange-400/40 shadow-2xl">
                        <div class="text-center mb-4">
                            <h4 class="text-xl font-bold text-orange-300 mb-2">üéâ Resultado Promocional!</h4>
                            <div id="promoResultContent">
                                <!-- Resultado ser√° inserido aqui -->
                            </div>
                        </div>
                    </div>

                    <!-- Bot√µes Promocionais -->
                    <div class="text-center space-y-3">
                        <button
                            id="newPromoCardButton"
                            onclick="generatePromoCard()"
                            class="w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 animate-shine"
                        >
                            üî• Novo Pacote Promo (R$ 5,00)
                        </button>
                        
                        <button
                            id="promoClaimButton"
                            onclick="claimPromoPrize()"
                            class="hidden w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200"
                        >
                            üí∞ Resgatar Pr√™mio Especial
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script type="module">
        // Estado global do jogo
        const gameState = {
            user: null,
            balance: 1000, // R$ 10,00 inicial (em centavos)
            cardsPlayed: 0,
            currentGame: 'normal', // 'normal' ou 'promo'
            scratchCard: null,
            promoCard: null,
            isScratching: false,
            scratchedArea: 0,
            isRevealed: false,
            scratchCount: 0,
            lastScratchPoint: null,
            // Canvas references
            backgroundCanvas: null,
            scratchCanvas: null,
            backgroundCtx: null,
            scratchCtx: null
        };

        // Configura√ß√µes dos jogos
        const gameConfig = {
            normal: {
                cardPrice: 200, // R$ 2,00 em centavos
                prizes: [0, 500, 1000, 2000, 5000, 50000], // Em centavos (R$ 0, 5, 10, 20, 50, 500)
                winChance: 0.25 // 25% de chance de ganhar
            },
            promo: {
                cardPrice: 500, // R$ 5,00 em centavos
                prizes: [0, 1000, 2000, 5000, 10000, 50000, 200000], // Em centavos (R$ 0, 10, 20, 50, 100, 500, 2000)
                winChance: 0.35 // 35% de chance de ganhar
            }
        };

        // Fun√ß√£o de login
        function handleLogin() {
            const name = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            
            if (!name || !email) {
                alert('Por favor, preencha todos os campos!');
                return;
            }
            
            if (!email.includes('@') || !email.includes('.')) {
                alert('Por favor, insira um e-mail v√°lido!');
                return;
            }
            
            gameState.user = { name, email };
            
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            updateUI();
            showNormalGame();
        }
        
        function logout() {
            if (confirm('Deseja realmente sair do jogo?')) {
                gameState.user = null;
                document.getElementById('gameScreen').classList.add('hidden');
                document.getElementById('loginScreen').classList.remove('hidden');
            }
        }

        // Atualizar interface
        function updateUI() {
            document.getElementById('userBalance').textContent = `R$ ${(gameState.balance / 100).toFixed(2).replace('.', ',')}`;
            document.getElementById('cardsPlayed').textContent = gameState.cardsPlayed;
        }

        // Mostrar jogo normal
        function showNormalGame() {
            gameState.currentGame = 'normal';
            document.getElementById('normalGame').classList.remove('hidden');
            document.getElementById('promoGame').classList.add('hidden');
            
            document.getElementById('normalGameBtn').classList.add('from-blue-600', 'to-blue-700');
            document.getElementById('promoGameBtn').classList.remove('from-orange-600', 'to-red-700');
        }

        // Mostrar jogo promocional
        function showPromoGame() {
            gameState.currentGame = 'promo';
            document.getElementById('normalGame').classList.add('hidden');
            document.getElementById('promoGame').classList.remove('hidden');
            
            document.getElementById('promoGameBtn').classList.add('from-orange-600', 'to-red-700');
            document.getElementById('normalGameBtn').classList.remove('from-blue-600', 'to-blue-700');
        }

        // Gerar cartela normal
        function generateNewCard() {
            const cost = gameConfig.normal.cardPrice;
            
            if (gameState.balance < cost) {
                alert('Saldo insuficiente! Voc√™ precisa de R$ 2,00 para jogar.');
                return;
            }
            
            gameState.balance -= cost;
            gameState.cardsPlayed++;
            
            // Gerar n√∫meros da cartela
            const numbers = [];
            while (numbers.length < 6) {
                const num = Math.floor(Math.random() * 50) + 1;
                if (!numbers.includes(num)) {
                    numbers.push(num);
                }
            }
            
            // Gerar n√∫meros vencedores
            const winningNumbers = [];
            while (winningNumbers.length < 3) {
                const num = Math.floor(Math.random() * 50) + 1;
                if (!winningNumbers.includes(num)) {
                    winningNumbers.push(num);
                }
            }
            
            // Determinar se vai ganhar
            const willWin = Math.random() < gameConfig.normal.winChance;
            let matchingCount = 0;
            
            if (willWin) {
                // Garantir pelo menos 1 acerto
                matchingCount = Math.floor(Math.random() * 3) + 1;
                for (let i = 0; i < matchingCount; i++) {
                    if (!numbers.includes(winningNumbers[i])) {
                        numbers[Math.floor(Math.random() * numbers.length)] = winningNumbers[i];
                    }
                }
            }
            
            gameState.scratchCard = {
                numbers: numbers.sort((a, b) => a - b),
                winningNumbers: winningNumbers.sort((a, b) => a - b),
                matchingCount,
                prize: willWin ? gameConfig.normal.prizes[matchingCount] : 0
            };
            
            updateUI();
            renderWinningNumbers();
            initializeScratchGame();
            resetGameUI();
        }

        // Gerar cartela promocional
        function generatePromoCard() {
            const cost = gameConfig.promo.cardPrice;
            
            if (gameState.balance < cost) {
                alert('Saldo insuficiente! Voc√™ precisa de R$ 5,00 para jogar.');
                return;
            }
            
            gameState.balance -= cost;
            gameState.cardsPlayed++;
            
            // Gerar n√∫meros da cartela promocional
            const numbers = [];
            while (numbers.length < 9) {
                const num = Math.floor(Math.random() * 75) + 1;
                if (!numbers.includes(num)) {
                    numbers.push(num);
                }
            }
            
            // Gerar n√∫meros vencedores promocionais
            const winningNumbers = [];
            while (winningNumbers.length < 4) {
                const num = Math.floor(Math.random() * 75) + 1;
                if (!winningNumbers.includes(num)) {
                    winningNumbers.push(num);
                }
            }
            
            // Determinar se vai ganhar
            const willWin = Math.random() < gameConfig.promo.winChance;
            let matchingCount = 0;
            
            if (willWin) {
                // Garantir pelo menos 1 acerto
                matchingCount = Math.floor(Math.random() * 4) + 1;
                for (let i = 0; i < matchingCount; i++) {
                    if (!numbers.includes(winningNumbers[i])) {
                        numbers[Math.floor(Math.random() * numbers.length)] = winningNumbers[i];
                    }
                }
            }
            
            gameState.promoCard = {
                numbers: numbers.sort((a, b) => a - b),
                winningNumbers: winningNumbers.sort((a, b) => a - b),
                matchingCount,
                prize: willWin ? gameConfig.promo.prizes[matchingCount] : 0
            };
            
            updateUI();
            renderPromoWinningNumbers();
            initializePromoScratchGame();
            resetPromoGameUI();
        }

        // Renderizar n√∫meros vencedores
        function renderWinningNumbers() {
            const container = document.getElementById('winningNumbers');
            container.innerHTML = '';
            
            if (!gameState.scratchCard) return;
            
            gameState.scratchCard.winningNumbers.forEach(number => {
                const numberElement = document.createElement('div');
                numberElement.className = 'bg-gradient-to-br from-green-400 to-green-600 text-white font-bold text-center py-2 rounded-lg shadow-lg';
                numberElement.textContent = number;
                container.appendChild(numberElement);
            });
        }

        function renderPromoWinningNumbers() {
            const container = document.getElementById('promoWinningNumbers');
            container.innerHTML = '';
            
            if (!gameState.promoCard) return;
            
            gameState.promoCard.winningNumbers.forEach(number => {
                const numberElement = document.createElement('div');
                numberElement.className = 'bg-gradient-to-br from-orange-400 to-red-500 text-white font-bold text-center py-2 rounded-lg shadow-lg';
                numberElement.textContent = number;
                container.appendChild(numberElement);
            });
        }

        // Inicializar sistema de raspadinha
        function initializeScratchGame() {
            gameState.backgroundCanvas = document.getElementById('backgroundCanvas');
            gameState.scratchCanvas = document.getElementById('scratchCanvas');
            gameState.backgroundCtx = gameState.backgroundCanvas.getContext('2d');
            gameState.scratchCtx = gameState.scratchCanvas.getContext('2d');
            
            // Renderizar n√∫meros no fundo
            renderBackgroundNumbers();
            
            // Criar cobertura met√°lica real√≠stica
            createMetallicSurface(gameState.scratchCtx, 320, 220);
            
            // Reset estado
            gameState.scratchedArea = 0;
            gameState.isRevealed = false;
            gameState.scratchCount = 0;
            gameState.lastScratchPoint = null;
            
            // Adicionar eventos
            setupScratchEvents();
        }

        function initializePromoScratchGame() {
            const backgroundCanvas = document.getElementById('promoBackgroundCanvas');
            const scratchCanvas = document.getElementById('promoScratchCanvas');
            const backgroundCtx = backgroundCanvas.getContext('2d');
            const scratchCtx = scratchCanvas.getContext('2d');
            
            // Renderizar n√∫meros promocionais no fundo
            renderPromoBackgroundNumbers(backgroundCtx);
            
            // Criar cobertura promocional
            createPromoSurface(scratchCtx, 320, 220);
            
            // Reset estado
            gameState.scratchedArea = 0;
            gameState.isRevealed = false;
            gameState.scratchCount = 0;
            gameState.lastScratchPoint = null;
            
            // Adicionar eventos promocionais
            setupPromoScratchEvents(scratchCanvas, scratchCtx);
        }

        // Renderizar n√∫meros no canvas de fundo
        function renderBackgroundNumbers() {
            const ctx = gameState.backgroundCtx;
            
            // Fundo gradient
            const gradient = ctx.createLinearGradient(0, 0, 320, 220);
            gradient.addColorStop(0, '#1e293b');
            gradient.addColorStop(1, '#0f172a');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 320, 220);
            
            if (!gameState.scratchCard) return;
            
            // Desenhar n√∫meros em grid
            const numbers = gameState.scratchCard.numbers;
            const cols = 3;
            const rows = 2;
            const cellWidth = 320 / cols;
            const cellHeight = 220 / rows;
            
            numbers.forEach((number, index) => {
                const col = index % cols;
                const row = Math.floor(index / cols);
                const x = col * cellWidth + cellWidth / 2;
                const y = row * cellHeight + cellHeight / 2;
                
                const isWinning = gameState.scratchCard.winningNumbers.includes(number);
                
                // Fundo do n√∫mero
                ctx.fillStyle = isWinning ? '#10b981' : '#374151';
                ctx.fillRect(col * cellWidth + 10, row * cellHeight + 10, cellWidth - 20, cellHeight - 20);
                
                // N√∫mero
                ctx.fillStyle = 'white';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(number, x, y);
                
                // Destaque para n√∫meros vencedores
                if (isWinning) {
                    ctx.strokeStyle = '#22d3ee';
                    ctx.lineWidth = 3;
                    ctx.strokeRect(col * cellWidth + 10, row * cellHeight + 10, cellWidth - 20, cellHeight - 20);
                }
            });
        }

        function renderPromoBackgroundNumbers(ctx) {
            // Fundo gradient promocional
            const gradient = ctx.createLinearGradient(0, 0, 320, 220);
            gradient.addColorStop(0, '#92400e');
            gradient.addColorStop(1, '#451a03');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 320, 220);
            
            if (!gameState.promoCard) return;
            
            // Desenhar n√∫meros em grid 3x3
            const numbers = gameState.promoCard.numbers;
            const cols = 3;
            const rows = 3;
            const cellWidth = 320 / cols;
            const cellHeight = 220 / rows;
            
            numbers.forEach((number, index) => {
                const col = index % cols;
                const row = Math.floor(index / cols);
                const x = col * cellWidth + cellWidth / 2;
                const y = row * cellHeight + cellHeight / 2;
                
                const isWinning = gameState.promoCard.winningNumbers.includes(number);
                
                // Fundo do n√∫mero
                ctx.fillStyle = isWinning ? '#dc2626' : '#7c2d12';
                ctx.fillRect(col * cellWidth + 8, row * cellHeight + 8, cellWidth - 16, cellHeight - 16);
                
                // N√∫mero
                ctx.fillStyle = 'white';
                ctx.font = 'bold 18px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(number, x, y);
                
                // Destaque para n√∫meros vencedores
                if (isWinning) {
                    ctx.strokeStyle = '#fbbf24';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(col * cellWidth + 8, row * cellHeight + 8, cellWidth - 16, cellHeight - 16);
                }
            });
        }

        // Criar superf√≠cie met√°lica real√≠stica
        function createMetallicSurface(ctx, width, height) {
            // Base met√°lica
            const gradient = ctx.createLinearGradient(0, 0, width, height);
            gradient.addColorStop(0, '#C0C0C0');
            gradient.addColorStop(0.3, '#E5E5E5');
            gradient.addColorStop(0.7, '#B8B8B8');
            gradient.addColorStop(1, '#A0A0A0');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            
            // Adicionar pontos brilhantes (textura)
            ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
            for (let i = 0; i < 80; i++) {
                ctx.beginPath();
                ctx.arc(Math.random() * width, Math.random() * height, Math.random() * 2 + 0.5, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // Sombras e reflexos
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            for (let i = 0; i < 20; i++) {
                ctx.beginPath();
                ctx.arc(Math.random() * width, Math.random() * height, Math.random() * 3 + 1, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // Texto de instru√ß√£o com sombra
            ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
            ctx.shadowBlur = 2;
            ctx.shadowOffsetX = 1;
            ctx.shadowOffsetY = 1;
            
            ctx.fillStyle = '#666';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ü™ô RASPE COM O DEDO ü™ô', width/2, height/2);
            
            // Resetar shadow
            ctx.shadowColor = 'transparent';
            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
        }

        function createPromoSurface(ctx, width, height) {
            // Base promocional com gradiente ardente
            const gradient = ctx.createRadialGradient(width/2, height/2, 0, width/2, height/2, width/2);
            gradient.addColorStop(0, '#FF6B35');
            gradient.addColorStop(0.4, '#F7931E');
            gradient.addColorStop(0.8, '#FFD700');
            gradient.addColorStop(1, '#FFA500');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            
            // Efeitos de fogo/brilho
            ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            for (let i = 0; i < 60; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                const size = Math.random() * 3 + 1;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // Texto promocional com sombra
            ctx.shadowColor = 'rgba(0, 0, 0, 0.7)';
            ctx.shadowBlur = 3;
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;
            
            ctx.fillStyle = '#FFF';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üî• RASPE COM O DEDO üî•', width/2, height/2 - 10);
            
            ctx.fillStyle = '#FFE4B5';
            ctx.font = 'bold 12px Arial';
            ctx.fillText('PACOTE PROMOCIONAL!', width/2, height/2 + 15);
            
            // Resetar shadow
            ctx.shadowColor = 'transparent';
            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
        }

        // Sistema de scratch emocional
        function setupScratchEvents() {
            const canvas = gameState.scratchCanvas;
            
            // Mouse events
            canvas.addEventListener('mousedown', startScratching);
            canvas.addEventListener('mousemove', scratch);
            canvas.addEventListener('mouseup', stopScratching);
            canvas.addEventListener('mouseleave', stopScratching);
            
            // Touch events com passive: false para prevenir scroll
            canvas.addEventListener('touchstart', startScratching, { passive: false });
            canvas.addEventListener('touchmove', scratch, { passive: false });
            canvas.addEventListener('touchend', stopScratching, { passive: false });
            canvas.addEventListener('touchcancel', stopScratching, { passive: false });
        }

        function setupPromoScratchEvents(canvas, ctx) {
            // Mouse events
            canvas.addEventListener('mousedown', (e) => startPromoScratching(e, canvas, ctx));
            canvas.addEventListener('mousemove', (e) => promoScratch(e, canvas, ctx));
            canvas.addEventListener('mouseup', stopScratching);
            canvas.addEventListener('mouseleave', stopScratching);
            
            // Touch events
            canvas.addEventListener('touchstart', (e) => startPromoScratching(e, canvas, ctx), { passive: false });
            canvas.addEventListener('touchmove', (e) => promoScratch(e, canvas, ctx), { passive: false });
            canvas.addEventListener('touchend', stopScratching, { passive: false });
            canvas.addEventListener('touchcancel', stopScratching, { passive: false });
        }

        // Fun√ß√µes de scratch otimizadas
        function startScratching(e) {
            if (gameState.isRevealed) return;
            
            gameState.isScratching = true;
            gameState.lastScratchPoint = null;
            scratch(e);
        }
        
        function scratch(e) {
            if (!gameState.isScratching || gameState.isRevealed) return;
            
            e.preventDefault();
            
            const rect = gameState.scratchCanvas.getBoundingClientRect();
            const scaleX = gameState.scratchCanvas.width / rect.width;
            const scaleY = gameState.scratchCanvas.height / rect.height;
            
            let x, y;
            if (e.type.includes('touch')) {
                x = (e.touches[0].clientX - rect.left) * scaleX;
                y = (e.touches[0].clientY - rect.top) * scaleY;
            } else {
                x = (e.clientX - rect.left) * scaleX;
                y = (e.clientY - rect.top) * scaleY;
            }
            
            // Desenhar brush com gradiente suave
            gameState.scratchCtx.globalCompositeOperation = 'destination-out';
            
            // Se temos ponto anterior, desenhar linha conectando
            if (gameState.lastScratchPoint) {
                gameState.scratchCtx.lineWidth = 40;
                gameState.scratchCtx.lineCap = 'round';
                gameState.scratchCtx.lineJoin = 'round';
                gameState.scratchCtx.strokeStyle = 'rgba(255,255,255,1)';
                
                gameState.scratchCtx.beginPath();
                gameState.scratchCtx.moveTo(gameState.lastScratchPoint.x, gameState.lastScratchPoint.y);
                gameState.scratchCtx.lineTo(x, y);
                gameState.scratchCtx.stroke();
            }
            
            // Criar brush circular com gradiente
            const gradient = gameState.scratchCtx.createRadialGradient(x, y, 0, x, y, 20);
            gradient.addColorStop(0, 'rgba(255,255,255,1)');
            gradient.addColorStop(0.6, 'rgba(255,255,255,0.8)');
            gradient.addColorStop(1, 'rgba(255,255,255,0.2)');
            
            gameState.scratchCtx.fillStyle = gradient;
            gameState.scratchCtx.beginPath();
            gameState.scratchCtx.arc(x, y, 20, 0, 2 * Math.PI);
            gameState.scratchCtx.fill();
            
            gameState.lastScratchPoint = { x, y };
            gameState.scratchCount++;
            
            // Verificar progresso a cada 20% dos scratches (otimizado)
            if (gameState.scratchCount % Math.max(1, Math.floor(20)) === 0) {
                checkScratchProgress();
            }
        }

        function startPromoScratching(e, canvas, ctx) {
            if (gameState.isRevealed) return;
            
            gameState.isScratching = true;
            gameState.lastScratchPoint = null;
            promoScratch(e, canvas, ctx);
        }
        
        function promoScratch(e, canvas, ctx) {
            if (!gameState.isScratching || gameState.isRevealed) return;
            
            e.preventDefault();
            
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            let x, y;
            if (e.type.includes('touch')) {
                x = (e.touches[0].clientX - rect.left) * scaleX;
                y = (e.touches[0].clientY - rect.top) * scaleY;
            } else {
                x = (e.clientX - rect.left) * scaleX;
                y = (e.clientY - rect.top) * scaleY;
            }
            
            // Brush promocional maior e mais fluido
            ctx.globalCompositeOperation = 'destination-out';
            
            // Conectar pontos
            if (gameState.lastScratchPoint) {
                ctx.lineWidth = 50;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.strokeStyle = 'rgba(255,255,255,1)';
                
                ctx.beginPath();
                ctx.moveTo(gameState.lastScratchPoint.x, gameState.lastScratchPoint.y);
                ctx.lineTo(x, y);
                ctx.stroke();
            }
            
            // Brush circular promocional
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, 25);
            gradient.addColorStop(0, 'rgba(255,255,255,1)');
            gradient.addColorStop(0.5, 'rgba(255,255,255,0.9)');
            gradient.addColorStop(1, 'rgba(255,255,255,0.3)');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, 25, 0, 2 * Math.PI);
            ctx.fill();
            
            gameState.lastScratchPoint = { x, y };
            gameState.scratchCount++;
            
            if (gameState.scratchCount % 15 === 0) {
                checkPromoScratchProgress();
            }
        }
        
        function stopScratching() {
            gameState.isScratching = false;
            gameState.lastScratchPoint = null;
        }

        // Verificar progresso da raspagem
        function checkScratchProgress() {
            const canvas = gameState.scratchCanvas;
            const ctx = gameState.scratchCtx;
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = imageData.data;
            
            let transparentPixels = 0;
            for (let i = 3; i < pixels.length; i += 4) {
                if (pixels[i] < 128) {
                    transparentPixels++;
                }
            }
            
            const totalPixels = canvas.width * canvas.height;
            const scratchedPercentage = (transparentPixels / totalPixels) * 100;
            
            // Atualizar UI
            document.getElementById('scratchProgress').textContent = `${scratchedPercentage.toFixed(1)}%`;
            document.getElementById('progressBar').style.width = `${Math.min(scratchedPercentage, 100)}%`;
            
            // Revelar automaticamente quando 60% est√° raspado
            if (scratchedPercentage >= 60 && !gameState.isRevealed) {
                setTimeout(() => revealResult(), 300); // Delay emocional
            }
        }

        function checkPromoScratchProgress() {
            const canvas = document.getElementById('promoScratchCanvas');
            const ctx = canvas.getContext('2d');
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = imageData.data;
            
            let transparentPixels = 0;
            for (let i = 3; i < pixels.length; i += 4) {
                if (pixels[i] < 128) {
                    transparentPixels++;
                }
            }
            
            const totalPixels = canvas.width * canvas.height;
            const scratchedPercentage = (transparentPixels / totalPixels) * 100;
            
            // Atualizar UI promocional
            document.getElementById('promoScratchProgress').textContent = `${scratchedPercentage.toFixed(1)}%`;
            document.getElementById('promoProgressBar').style.width = `${Math.min(scratchedPercentage, 100)}%`;
            
            // Revelar quando 60% est√° raspado
            if (scratchedPercentage >= 60 && !gameState.isRevealed) {
                setTimeout(() => revealPromoResult(), 300);
            }
        }

        // Revelar resultado
        function revealResult() {
            gameState.isRevealed = true;
            
            const card = gameState.scratchCard;
            if (!card) return;
            
            const resultDiv = document.getElementById('gameResult');
            const resultContent = document.getElementById('resultContent');
            
            const matchingNumbers = card.numbers.filter(num => card.winningNumbers.includes(num));
            
            let resultHTML = `
                <div class="mb-4">
                    <h5 class="text-lg font-semibold text-cyan-300 mb-2">Seus N√∫meros:</h5>
                    <div class="grid grid-cols-3 gap-2">
            `;
            
            card.numbers.forEach(number => {
                const isMatch = card.winningNumbers.includes(number);
                resultHTML += `
                    <div class="bg-gradient-to-br ${isMatch ? 'from-green-400 to-green-600 ring-2 ring-yellow-400' : 'from-gray-600 to-gray-800'} text-white font-bold text-center py-2 rounded-lg">
                        ${number}
                    </div>
                `;
            });
            
            resultHTML += '</div></div>';
            
            if (card.prize > 0) {
                resultHTML += `
                    <div class="bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-400/50 rounded-lg p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-400 mb-2">üéâ PARAB√âNS! üéâ</div>
                            <div class="text-lg text-green-300">Voc√™ acertou ${matchingNumbers.length} n√∫mero${matchingNumbers.length > 1 ? 's' : ''}!</div>
                            <div class="text-2xl font-bold text-yellow-300 mt-2">Pr√™mio: R$ ${(card.prize / 100).toFixed(2).replace('.', ',')}</div>
                        </div>
                    </div>
                `;
                document.getElementById('claimButton').classList.remove('hidden');
            } else {
                resultHTML += `
                    <div class="bg-gradient-to-r from-gray-500/20 to-gray-700/20 border border-gray-400/50 rounded-lg p-4">
                        <div class="text-center">
                            <div class="text-xl font-bold text-gray-400 mb-2">üòî N√£o foi desta vez!</div>
                            <div class="text-gray-300">Voc√™ n√£o acertou nenhum n√∫mero.</div>
                            <div class="text-sm text-cyan-300 mt-2">Tente novamente com uma nova cartela!</div>
                        </div>
                    </div>
                `;
            }
            
            resultContent.innerHTML = resultHTML;
            resultDiv.classList.remove('hidden');
        }

        function revealPromoResult() {
            gameState.isRevealed = true;
            
            const card = gameState.promoCard;
            if (!card) return;
            
            const resultDiv = document.getElementById('promoGameResult');
            const resultContent = document.getElementById('promoResultContent');
            
            const matchingNumbers = card.numbers.filter(num => card.winningNumbers.includes(num));
            
            let resultHTML = `
                <div class="mb-4">
                    <h5 class="text-lg font-semibold text-orange-300 mb-2">Seus N√∫meros Promocionais:</h5>
                    <div class="grid grid-cols-3 gap-2">
            `;
            
            card.numbers.forEach(number => {
                const isMatch = card.winningNumbers.includes(number);
                resultHTML += `
                    <div class="bg-gradient-to-br ${isMatch ? 'from-red-400 to-red-600 ring-2 ring-yellow-400' : 'from-orange-800 to-red-900'} text-white font-bold text-center py-2 rounded-lg text-sm">
                        ${number}
                    </div>
                `;
            });
            
            resultHTML += '</div></div>';
            
            if (card.prize > 0) {
                resultHTML += `
                    <div class="bg-gradient-to-r from-red-500/20 to-orange-500/20 border border-orange-400/50 rounded-lg p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-400 mb-2">üî• PR√äMIO ESPECIAL! üî•</div>
                            <div class="text-lg text-orange-300">Voc√™ acertou ${matchingNumbers.length} n√∫mero${matchingNumbers.length > 1 ? 's' : ''}!</div>
                            <div class="text-2xl font-bold text-yellow-300 mt-2">Pr√™mio: R$ ${(card.prize / 100).toFixed(2).replace('.', ',')}</div>
                        </div>
                    </div>
                `;
                document.getElementById('promoClaimButton').classList.remove('hidden');
            } else {
                resultHTML += `
                    <div class="bg-gradient-to-r from-gray-500/20 to-gray-700/20 border border-gray-400/50 rounded-lg p-4">
                        <div class="text-center">
                            <div class="text-xl font-bold text-gray-400 mb-2">üòî N√£o foi desta vez!</div>
                            <div class="text-gray-300">Voc√™ n√£o acertou nenhum n√∫mero.</div>
                            <div class="text-sm text-orange-300 mt-2">Tente um novo pacote promocional!</div>
                        </div>
                    </div>
                `;
            }
            
            resultContent.innerHTML = resultHTML;
            resultDiv.classList.remove('hidden');
        }

        // Resgatar pr√™mios
        function claimPrize() {
            if (!gameState.scratchCard || gameState.scratchCard.prize <= 0) return;
            
            gameState.balance += gameState.scratchCard.prize;
            updateUI();
            
            alert(`Parab√©ns! Voc√™ resgatou R$ ${(gameState.scratchCard.prize / 100).toFixed(2).replace('.', ',')}!`);
            
            resetGameUI();
        }

        function claimPromoPrize() {
            if (!gameState.promoCard || gameState.promoCard.prize <= 0) return;
            
            gameState.balance += gameState.promoCard.prize;
            updateUI();
            
            alert(`Parab√©ns! Voc√™ resgatou R$ ${(gameState.promoCard.prize / 100).toFixed(2).replace('.', ',')}!`);
            
            resetPromoGameUI();
        }

        // Reset das interfaces
        function resetGameUI() {
            document.getElementById('gameResult').classList.add('hidden');
            document.getElementById('claimButton').classList.add('hidden');
            document.getElementById('scratchProgress').textContent = '0%';
            document.getElementById('progressBar').style.width = '0%';
        }

        function resetPromoGame
