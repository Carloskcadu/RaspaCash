    body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
    }
    
    .animate-bounce { animation: bounce 1s infinite; }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    
    @keyframes bounce {
        0%, 100% { transform: translateY(-25%); }
        50% { transform: none; }
    }
    
    @keyframes pulse { 50% { opacity: .5; } }
    
    .bg-gradient-animated {
        background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
    }
    
    @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    @media (max-width: 640px) {
        .text-4xl { font-size: 2rem; }
        .text-3xl { font-size: 1.875rem; }
        .p-8 { padding: 1rem; }
        .gap-6 { gap: 1rem; }
    }
</style>


<script>
    class RaspaCashApp {
        constructor() {
            this.currentUser = null;
            this.currentScreen = 'login';
            this.gameData = {
                prizes: [0, 5, 10, 25, 50, 100, 250, 500, 1000, 2000],
                costs: [1, 2, 5, 10, 20, 50]
            };
            this.init();
        }

        init() {
            setTimeout(() => {
                document.getElementById('loading').remove();
                
                const savedUser = localStorage.getItem('currentUser');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    this.currentScreen = 'home';
                }
                
                this.render();
            }, 1000);
        }

        render() {
            const app = document.getElementById('app');
            
            switch (this.currentScreen) {
                case 'login': app.innerHTML = this.renderLogin(); break;
                case 'home': app.innerHTML = this.renderHome(); break;
                case 'game': app.innerHTML = this.renderGame(); break;
                case 'deposit': app.innerHTML = this.renderDeposit(); break;
                case 'withdraw': app.innerHTML = this.renderWithdraw(); break;
                default: app.innerHTML = this.renderLogin();
            }
            
            this.attachEventListeners();
        }

        renderLogin() {
            return `
                <div class="min-h-screen flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                        <div class="text-center mb-8">
                            <h1 class="text-4xl font-bold text-purple-600 mb-2">ğŸ° RaspaCash</h1>
                            <p class="text-gray-600">Raspadinhas Online com PIX</p>
                            <p class="text-xs text-gray-400 mt-1">RaspaCashbr.online</p>
                        </div>
                        
                        <form id="loginForm" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="email" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                       placeholder="seu@email.com">
                            </div>
                            
                            <button type="submit" 
                                    class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors">
                                Entrar / Cadastrar
                            </button>
                        </form>
                        
                        <div class="mt-6 text-center">
                            <p class="text-sm text-gray-500 mb-2">
                                ğŸ BÃ´nus de R$ 50,00 para novos usuÃ¡rios!
                            </p>
                            <p class="text-xs text-gray-400">
                                Cadastro automÃ¡tico - 100% seguro
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        renderHome() {
            return `
                <div class="min-h-screen">
                    <header class="bg-white shadow-sm">
                        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                            <div>
                                <h1 class="text-2xl font-bold text-purple-600">ğŸ° RaspaCash</h1>
                                <p class="text-xs text-gray-500">RaspaCashbr.online</p>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-sm text-gray-500">${this.currentUser?.email || 'UsuÃ¡rio'}</p>
                                    <p class="font-bold text-green-600">ğŸ’° R$ ${(this.currentUser?.balance || 0).toFixed(2)}</p>
                                </div>
                                <button onclick="app.logout()" class="text-red-500 hover:text-red-700 text-sm">
                                    Sair
                                </button>
                            </div>
                        </div>
                    </header>

                    <main class="max-w-7xl mx-auto px-4 py-8">
                        <!-- Stats -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500">
                                <h3 class="text-lg font-semibold text-gray-700 mb-2">ğŸ’° Saldo Atual</h3>
                                <p class="text-3xl font-bold text-green-600">R$ ${(this.currentUser?.balance || 0).toFixed(2)}</p>
                                <p class="text-sm text-gray-500 mt-1">DisponÃ­vel para jogar</p>
                            </div>
                            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-blue-500">
                                <h3 class="text-lg font-semibold text-gray-700 mb-2">ğŸ® Jogos Realizados</h3>
                                <p class="text-3xl font-bold text-blue-600">${this.currentUser?.totalPlayed || 0}</p>
                                <p class="text-sm text-gray-500 mt-1">Raspadinhas jogadas</p>
                            </div>
                            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-purple-500">
                                <h3 class="text-lg font-semibold text-gray-700 mb-2">ğŸ† Total de Ganhos</h3>
                                <p class="text-3xl font-bold text-purple-600">R$ ${(this.currentUser?.totalWon || 0).toFixed(2)}</p>
                                <p class="text-sm text-gray-500 mt-1">Valor total ganho</p>
                            </div>
                        </div>

                        <!-- Main Actions -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                            <button onclick="app.goToScreen('game')" 
                                    class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6 rounded-xl hover:scale-105 transition-transform shadow-lg">
                                <div class="text-3xl mb-3">ğŸ°</div>
                                <div class="font-bold text-lg">Jogar Agora</div>
                                <div class="text-sm opacity-90">Raspadinhas</div>
                            </button>
                            
                            <button onclick="app.goToScreen('deposit')" 
                                    class="bg-gradient-to-r from-green-500 to-emerald-500 text-white p-6 rounded-xl hover:scale-105 transition-transform shadow-lg">
                                <div class="text-3xl mb-3">ğŸ’³</div>
                                <div class="font-bold text-lg">Depositar</div>
                                <div class="text-sm opacity-90">Via PIX</div>
                            </button>
                            
                            <button onclick="app.goToScreen('withdraw')" 
                                    class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white p-6 rounded-xl hover:scale-105 transition-transform shadow-lg">
                                <div class="text-3xl mb-3">ğŸ’¸</div>
                                <div class="font-bold text-lg">Sacar</div>
                                <div class="text-sm opacity-90">Instant\u00e2neo</div>
                            </button>
                            
                            <button onclick="app.showHistory()" 
                                    class="bg-gradient-to-r from-orange-500 to-red-500 text-white p-6 rounded-xl hover:scale-105 transition-transform shadow-lg">
                                <div class="text-3xl mb-3">ğŸ“Š</div>
                                <div class="font-bold text-lg">HistÃ³rico</div>
                                <div class="text-sm opacity-90">RelatÃ³rios</div>
                            </button>
                        </div>

                        <!-- Promotion Banner -->
                        <div class="bg-gradient-animated text-white p-8 rounded-xl text-center shadow-2xl">
                            <h2 class="text-4xl font-bold mb-4">ğŸ”¥ PROMOÃ‡ÃƒO ESPECIAL! ğŸ”¥</h2>
                            <p class="text-xl mb-6">Ganhe atÃ© R$ 2.000 em nossas raspadinhas premium!</p>
                            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                                <button onclick="app.goToScreen('game')" 
                                        class="bg-white text-purple-600 px-8 py-4 rounded-lg font-bold hover:bg-gray-100 transition-colors text-lg">
                                    ğŸ° Jogar Agora
                                </button>
                                <button onclick="app.goToScreen('deposit')" 
                                        class="bg-yellow-400 text-purple-800 px-8 py-4 rounded-lg font-bold hover:bg-yellow-300 transition-colors text-lg">
                                    ğŸ’° Depositar e Ganhar
                                </button>
                            </div>
                        </div>
                    </main>

                    <!-- Footer -->
                    <footer class="bg-gray-800 text-white py-8 mt-12">
                        <div class="max-w-7xl mx-auto px-4 text-center">
                            <p class="text-lg font-bold mb-2">ğŸ° RaspaCash - RaspaCashbr.online</p>
                            <p class="text-sm text-gray-400">Raspadinhas online com PIX â€¢ DepÃ³sitos e saques instantÃ¢neos</p>
                            <p class="text-xs text-gray-500 mt-4">Â© 2024 RaspaCash. Jogue com responsabilidade.</p>
                        </div>
                    </footer>
                </div>
            `;
        }

        renderGame() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-purple-800">
                    <header class="bg-black bg-opacity-20 text-white p-4">
                        <div class="max-w-7xl mx-auto flex justify-between items-center">
                            <button onclick="app.goToScreen('home')" 
                                    class="flex items-center text-white hover:text-gray-300 transition-colors">
                                â† Voltar
                            </button>
                            <div class="text-center">
                                <h1 class="text-2xl font-bold">ğŸ° Raspadinha</h1>
                                <p class="text-sm opacity-75">RaspaCashbr.online</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold">ğŸ’° R$ ${(this.currentUser?.balance || 0).toFixed(2)}</p>
                            </div>
                        </div>
                    </header>

                    <main class="max-w-4xl mx-auto px-4 py-8">
                        <div class="bg-white rounded-2xl p-8 shadow-2xl">
                            <!-- Game Selection -->
                            <div class="text-center mb-8">
                                <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸ° Escolha sua Raspadinha</h2>
                                <p class="text-gray-600 mb-6">Quanto maior o valor, maior o prÃªmio!</p>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                    ${this.gameData.costs.map(cost => `
                                        <button onclick="app.playScratchCard(${cost})" 
                                                class="bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 rounded-xl hover:scale-105 transition-transform shadow-lg ${this.currentUser.balance < cost ? 'opacity-50 cursor-not-allowed' : ''}">
                                            <div class="text-2xl font-bold">R$ ${cost}</div>
                                            <div class="text-sm opacity-90">MÃ¡ximo</div>
                                            <div class="text-lg font-bold">R$ ${(cost * 200).toLocaleString()}</div>
                                        </button>
                                    `).join('')}
                                </div>
                            </div>

                            <div id="gameResult" class="text-center text-2xl font-bold min-h-[100px] flex items-center justify-center">
                                <p class="text-gray-500">Selecione um valor acima para jogar! ğŸ¯</p>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }

        renderDeposit() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-green-500 to-emerald-600">
                    <header class="bg-black bg-opacity-20 text-white p-4">
                        <div class="max-w-7xl mx-auto flex justify-between items-center">
                            <button onclick="app.goToScreen('home')" 
                                    class="flex items-center text-white hover:text-gray-300">
                                â† Voltar
                            </button>
                            <div class="text-center">
                                <h1 class="text-2xl font-bold">ğŸ’³ Depositar</h1>
                                <p class="text-sm opacity-75">PIX InstantÃ¢neo</p>
                            </div>
                            <div></div>
                        </div>
                    </header>

                    <main class="max-w-md mx-auto px-4 py-8">
                        <div class="bg-white rounded-2xl p-8 shadow-2xl">
                            <div class="text-center mb-6">
                                <h2 class="text-2xl font-bold text-gray-800">ğŸ’³ DepÃ³sito via PIX</h2>
                                <p class="text-gray-600">InstantÃ¢neo e seguro</p>
                                <p class="text-sm text-green-600 font-semibold mt-2">Taxa zero â€¢ AprovaÃ§Ã£o imediata</p>
                            </div>

                            <form id="depositForm" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ’° Valor para DepÃ³sito</label>
                                    <select id="depositAmount" required 
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 text-lg">
                                        <option value="">ğŸ’³ Selecione o valor</option>
                                        <option value="10">R$ 10,00 â†’ Ganhe atÃ© R$ 2.000</option>
                                        <option value="25">R$ 25,00 â†’ Ganhe atÃ© R$ 5.000</option>
                                        <option value="50">R$ 50,00 â†’ Ganhe atÃ© R$ 10.000</option>
                                        <option value="100">R$ 100,00 â†’ Ganhe atÃ© R$ 20.000</option>
                                        <option value="200">R$ 200,00 â†’ Ganhe atÃ© R$ 40.000</option>
                                        <option value="500">R$ 500,00 â†’ Ganhe atÃ© R$ 100.000</option>
                                    </select>
                                </div>

                                <button type="submit" 
                                        class="w-full bg-green-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-green-700 transition-colors">
                                    ğŸ”¥ Gerar PIX Agora
                                </button>
                            </form>

                            <div id="pixResult" class="hidden mt-6">
                                <div class="text-center p-6 bg-gray-50 rounded-lg">
                                    <h3 class="text-xl font-bold mb-4 text-green-600">âœ… PIX Gerado com Sucesso!</h3>
                                    <div class="bg-white p-4 rounded-lg mb-4 shadow-sm">
                                        <div class="text-6xl mb-2">ğŸ“±</div>
                                        <p class="text-sm text-gray-600">Abra seu app do banco</p>
                                        <p class="text-sm text-gray-600">e escaneie o cÃ³digo</p>
                                    </div>
                                    <div class="bg-gray-100 p-3 rounded text-xs break-all mb-4 font-mono">
                                        <strong>CÃ³digo PIX Copy & Paste:</strong><br>
                                        <div id="pixCode" class="mt-2 p-2 bg-white rounded border"></div>
                                    </div>
                                    <p class="text-sm text-green-600 font-bold mb-4">
                                        ğŸ’° Valor: R$ <span id="pixAmount"></span><br>
                                        â° VÃ¡lido por 30 minutos
                                    </p>
                                    <button onclick="app.simulatePayment()" 
                                            class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors">
                                        âœ… JÃ¡ Paguei - Verificar Pagamento
                                    </button>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }

        renderWithdraw() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-blue-500 to-cyan-600">
                    <header class="bg-black bg-opacity-20 text-white p-4">
                        <div class="max-w-7xl mx-auto flex justify-between items-center">
                            <button onclick="app.goToScreen('home')" 
                                    class="flex items-center text-white hover:text-gray-300">
                                â† Voltar
                            </button>
                            <div class="text-center">
                                <h1 class="text-2xl font-bold">ğŸ’¸ Sacar</h1>
                                <p class="text-sm opacity-75">PIX InstantÃ¢neo</p>
                            </div>
                            <div></div>
                        </div>
                    </header>

                    <main class="max-w-md mx-auto px-4 py-8">
                        <div class="bg-white rounded-2xl p-8 shadow-2xl">
                            <div class="text-center mb-6">
                                <h2 class="text-2xl font-bold text-gray-800">ğŸ’¸ Saque via PIX</h2>
                                <div class="bg-green-50 p-3 rounded-lg mt-4">
                                    <p class="text-green-800 font-bold">ğŸ’° Saldo DisponÃ­vel</p>
                                    <p class="text-3xl font-bold text-green-600">R$ ${(this.currentUser?.balance || 0).toFixed(2)}</p>
                                </div>
                            </div>

                            <form id="withdrawForm" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ’° Valor para Saque</label>
                                    <input type="number" id="withdrawAmount" 
                                           min="10" max="${this.currentUser?.balance || 0}" step="0.01" required 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg"
                                           placeholder="MÃ­nimo R$ 10,00">
                                    <p class="text-xs text-gray-500 mt-1">Valor mÃ­nimo: R$ 10,00 | MÃ¡ximo: R$ ${(this.currentUser?.balance || 0).toFixed(2)}</p>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ”‘ Chave PIX</label>
                                    <input type="text" id="pixKey" required 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                           placeholder="CPF, E-mail, Telefone ou Chave AleatÃ³ria">
                                    <p class="text-xs text-gray-500 mt-1">Digite sua chave PIX cadastrada no banco</p>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ‘¤ Nome Completo</label>
                                    <input type="text" id="fullName" required 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                           placeholder="Seu nome completo (igual ao banco)">
                                    <p class="text-xs text-gray-500 mt-1">Nome deve ser igual ao cadastrado no banco</p>
                                </div>

                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-blue-800 mb-2">â„¹ï¸ InformaÃ§Ãµes do Saque:</h4>
                                    <ul class="text-sm text-blue-700 space-y-1">
                                        <li>â€¢ âš¡ Processamento: InstantÃ¢neo</li>
                                        <li>â€¢ ğŸ’³ Recebimento: AtÃ© 24 horas</li>
                                        <li>â€¢ ğŸ’° Taxa: R$ 0,00 (Gratuito)</li>
                                        <li>â€¢ ğŸ”’ SeguranÃ§a: 256-bit SSL</li>
                                    </ul>
                                </div>

                                <button type="submit" 
                                        class="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition-colors">
                                    ğŸ’¸ Solicitar Saque Agora
                                </button>
                            </form>
                        </div>
                    </main>
                </div>
            `;
        }

        attachEventListeners() {
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', (e) => this.handleLogin(e));
            }

            const depositForm = document.getElementById('depositForm');
            if (depositForm) {
                depositForm.addEventListener('submit', (e) => this.handleDeposit(e));
            }

            const withdrawForm = document.getElementById('withdrawForm');
            if (withdrawForm) {
                withdrawForm.addEventListener('submit', (e) => this.handleWithdraw(e));
            }
        }

        async handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            
            // Verificar se Ã© usuÃ¡rio existente
            const existingUser = localStorage.getItem(`user_${btoa(email).replace(/[^a-zA-Z0-9]/g, '')}`);
            
            if (existingUser) {
                this.currentUser = JSON.parse(existingUser);
            } else {
                // Novo usuÃ¡rio - bÃ´nus de boas-vindas
                this.currentUser = {
                    id: btoa(email).replace(/[^a-zA-Z0-9]/g, ''),
                    email: email,
                    balance: 50, // BÃ´nus inicial
                    totalPlayed: 0,
                    totalWon: 0,
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                
                // Salvar novo usuÃ¡rio
                localStorage.setItem(`user_${this.currentUser.id}`, JSON.stringify(this.currentUser));
            }

            localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
            
            this.currentScreen = 'home';
            this.render();
        }

        async handleDeposit(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('depositAmount').value);
            
            // Simular geraÃ§Ã£o do PIX
            const pixCode = `00020126580014BR.GOV.BCB.PIX0136raspacashbr${Date.now()}52040000530398654${String(amount * 100).padStart(8, '0')}5802BR5917RaspaCashBR.online6014BELO HORIZONTE62070503***6304${Math.random().toString().substr(2, 4)}`;
            
            document.getElementById('pixCode').textContent = pixCode;
            document.getElementById('pixAmount').textContent = amount.toFixed(2);
            document.getElementById('pixResult').classList.remove('hidden');
            
            // Salvar valor para simulaÃ§Ã£o
            window.currentDepositAmount = amount;
        }

        async handleWithdraw(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const pixKey = document.getElementById('pixKey').value;
            const fullName = document.getElementById('fullName').value;
            
            if (amount > this.currentUser.balance) {
                alert('ğŸ’° Saldo insuficiente! Seu saldo atual Ã© R$ ' + this.currentUser.balance.toFixed(2));
                return;
            }

            if (amount < 10) {
                alert('ğŸ’° Valor mÃ­nimo para saque Ã© R$ 10,00');
                return;
            }

            // Processar saque
            this.currentUser.balance -= amount;
            
            // Salvar transaÃ§Ã£o
            const transaction = {
                type: 'withdrawal',
                amount: amount,
                pixKey: pixKey,
                fullName: fullName,
                status: 'processing',
                date: new Date().toISOString()
            };
            
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            transactions.push(transaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));
            
            // Salvar usuÃ¡rio atualizado
            localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
            localStorage.setItem(`user_${this.currentUser.id}`, JSON.stringify(this.currentUser));
            
            alert(`âœ… Saque de R$ ${amount.toFixed(2)} processado com sucesso!\\n\\nğŸ’³ Chave PIX: ${pixKey}\\nğŸ‘¤ Nome: ${fullName}\\n\\nâ° VocÃª receberÃ¡ em atÃ© 24 horas na sua conta.`);
            
            this.goToScreen('home');
        }

        simulatePayment() {
            const amount = window.currentDepositAmount || 10;
            
            // Simular aprovaÃ§Ã£o do pagamento
            this.currentUser.balance += amount;
            
            // Salvar transaÃ§Ã£o
            const transaction = {
                type: 'deposit',
                amount: amount,
                status: 'completed',
                date: new Date().toISOString(),
                method: 'PIX'
            };
            
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            transactions.push(transaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));
            
            // Salvar usuÃ¡rio atualizado
            localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
            localStorage.setItem(`user_${this.currentUser.id}`, JSON.stringify(this.currentUser));
            
            alert(`ğŸ‰ PAGAMENTO APROVADO!\\n\\nğŸ’° R$ ${amount.toFixed(2)} foi adicionado ao seu saldo!\\n\\nâœ… VocÃª jÃ¡ pode jogar as raspadinhas!`);
            
            this.goToScreen('home');
        }

        playScratchCard(cost) {
            if (this.currentUser.balance < cost) {
                alert(`ğŸ’° Saldo insuficiente!\\n\\nSeu saldo: R$ ${this.currentUser.balance.toFixed(2)}\\nNecessÃ¡rio: R$ ${cost.toFixed(2)}\\n\\nğŸ’³ FaÃ§a um depÃ³sito para continuar jogando!`);
                return;
            }

            // Deduzir custo
            this.currentUser.balance -= cost;
            this.currentUser.totalPlayed += 1;

            // Calcular prÃªmio (30% chance de ganhar)
            const maxPrize = cost * 200;
            const prizes = this.gameData.prizes.filter(p => p <= maxPrize && p > 0);
            
            let randomPrize = 0;
            if (Math.random() < 0.30) { // 30% chance de ganhar
                randomPrize = prizes[Math.floor(Math.random() * prizes.length)];
            }

            // Adicionar prÃªmio se ganhou
            if (randomPrize > 0) {
                this.currentUser.balance += randomPrize;
                this.currentUser.totalWon += randomPrize;
            }

            // Salvar transaÃ§Ã£o
            const transaction = {
                type: 'game',
                cost: cost,
                prize: randomPrize,
                date: new Date().toISOString()
            };
            
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            transactions.push(transaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));

            // Salvar dados atualizados
            localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
            localStorage.setItem(`user_${this.currentUser.id}`, JSON.stringify(this.currentUser));

            // Mostrar resultado com animaÃ§Ã£o
            const gameResult = document.getElementById('gameResult');
            
            gameResult.innerHTML = `
                <div class="animate-pulse">
                    <div class="text-4xl mb-4">ğŸ°</div>
                    <div class="text-xl">Raspando...</div>
                </div>
            `;

            setTimeout(() => {
                if (randomPrize > 0) {
                    gameResult.innerHTML = `
                        <div class="text-center animate-bounce">
                            <div class="text-6xl mb-4">ğŸ‰</div>
                            <div class="text-3xl font-bold text-green-600 mb-2">PARABÃ‰NS!</div>
                            <div class="text-2xl font-bold text-green-700">VocÃª ganhou R$ ${randomPrize.toFixed(2)}!</div>
                            <div class="text-lg text-gray-600 mt-2">ğŸ’° Novo saldo: R$ ${this.currentUser.balance.toFixed(2)}</div>
                        </div>
                    `;
                    
                    // Efeito sonoro simulado
                    setTimeout(() => {
                        alert(`ğŸŠ PARABÃ‰NS! ğŸŠ\\n\\nğŸ† VocÃª ganhou R$ ${randomPrize.toFixed(2)}!\\n\\nğŸ’° Seu novo saldo Ã© R$ ${this.currentUser.balance.toFixed(2)}\\n\\nğŸ° Continue jogando para ganhar mais!`);
                    }, 1000);
                } else {
                    gameResult.innerHTML = `
                        <div class="text-center">
                            <div class="text-5xl mb-4">ğŸ˜”</div>
                            <div class="text-2xl font-bold text-gray-600 mb-2">Que pena!</div>
                            <div class="text-lg text-gray-600">NÃ£o foi desta vez...</div>
                            <div class="text-lg text-blue-600 mt-2">ğŸ’° Saldo atual: R$ ${this.currentUser.balance.toFixed(2)}</div>
                            <div class="text-sm text-gray-500 mt-2">ğŸ€ Tente novamente! A sorte pode mudar!</div>
                        </div>
                    `;
                }
                
                // Limpar resultado apÃ³s alguns segundos
                setTimeout(() => {
                    gameResult.innerHTML = `<p class="text-gray-500">Selecione um valor acima para jogar novamente! ğŸ¯</p>`;
                }, 5000);
            }, 2000);
        }

        goToScreen(screen) {
            this.currentScreen = screen;
            this.render();
        }

        logout() {
            localStorage.removeItem('currentUser');
            this.currentUser = null;
            this.currentScreen = 'login';
            this.render();
        }

        showHistory() {
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            let historyText = "ğŸ“Š HISTÃ“RICO DE TRANSAÃ‡Ã•ES\\n\\n";
            
            if (transactions.length === 0) {
                historyText += "Nenhuma transaÃ§Ã£o encontrada.";
            } else {
                transactions.slice(-10).reverse().forEach((transaction, index) => {
                    const date = new Date(transaction.date).toLocaleString('pt-BR');
                    
                    if (transaction.type === 'deposit') {
                        historyText += `ğŸ’³ DEPÃ“SITO\\n`;
                        historyText += `ğŸ’° R$ ${transaction.amount.toFixed(2)}\\n`;
                        historyText += `ğŸ“… ${date}\\n\\n`;
                    } else if (transaction.type === 'withdrawal') {
                        historyText += `ğŸ’¸ SAQUE\\n`;
                        historyText += `ğŸ’° R$ ${transaction.amount.toFixed(2)}\\n`;
                        historyText += `ğŸ”‘ ${transaction.pixKey}\\n`;
                        historyText += `ğŸ“… ${date}\\n\\n`;
                    } else if (transaction.type === 'game') {
                        historyText += `ğŸ° RASPADINHA\\n`;
                        historyText += `ğŸ’¸ Apostou: R$ ${transaction.cost.toFixed(2)}\\n`;
                        if (transaction.prize > 0) {
                            historyText += `ğŸ† Ganhou: R$ ${transaction.prize.toFixed(2)}\\n`;
                        } else {
                            historyText += `ğŸ˜” NÃ£o ganhou\\n`;
                        }
                        historyText += `ğŸ“… ${date}\\n\\n`;
                    }
                });
            }
            
            alert(historyText);
        }
    }

    // Inicializar aplicaÃ§Ã£o quando a pÃ¡gina carregar
    document.addEventListener('DOMContentLoaded', () => {
        window.app = new RaspaCashApp();
    });
</script>
